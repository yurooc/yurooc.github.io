<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Hugo安装配置 | YuBlog</title>
<meta name="keywords" content="Hugo">
<meta name="description" content="在使用Hugo过程中的一些安装和配置问题">
<meta name="author" content="Yu">
<link rel="canonical" href="https://yurooc.github.io/blog/hugo%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.678b5c47efa744d2e0dd0d61101075e6aecdc9a0631e7ad8538f4ec0cca79273.css" integrity="sha256-Z4tcR&#43;&#43;nRNLg3Q1hEBB15q7NyaBjHnrYU49OwMynknM=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://yurooc.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://yurooc.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://yurooc.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://yurooc.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://yurooc.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Hugo安装配置" />
<meta property="og:description" content="在使用Hugo过程中的一些安装和配置问题" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yurooc.github.io/blog/hugo%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" /><meta property="article:section" content="Blog" />
<meta property="article:published_time" content="2023-11-08T03:01:57+08:00" />
<meta property="article:modified_time" content="2023-11-08T03:01:57+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hugo安装配置"/>
<meta name="twitter:description" content="在使用Hugo过程中的一些安装和配置问题"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blogs",
      "item": "https://yurooc.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Hugo安装配置",
      "item": "https://yurooc.github.io/blog/hugo%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hugo安装配置",
  "name": "Hugo安装配置",
  "description": "在使用Hugo过程中的一些安装和配置问题",
  "keywords": [
    "Hugo"
  ],
  "articleBody": "一.Hugo中添加不蒜子计数 Hugo添加不蒜子页面浏览次数与阅读数据统计\n什么是不蒜子？\nBusuanzi是一个用于统计网站访问量的工具。它通常嵌入到网页中，可以追踪页面的浏览次数，方可数量积极其他一些基本的访问数据。这个工具可以帮助网站管理员了解他们的网站受欢迎程度和流量情况。\n使用步骤\n在head.html，footer.html，single.html，config.yml进行修改\n1.head.html\n我的papermod的路径为themes/PaperMod/layouts/partials/head.html\n添加以下代码\n{{- if .Site.Params.busuanzi.enable -}} \u003cscript async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"\u003e\u003c/script\u003e \u003cmeta name=\"referrer\" content=\"no-referrer-when-downgrade\"\u003e {{- end -}} 2.footer.html\n用于在站点底部显示总访问量与访客数\n我的PaperMod路径为themes/PaperMod/layouts/partials/footer.html\n添加以下代码，注意添加在代码块里\n{{ if .Site.Params.busuanzi.enable -}} \u003cdiv class=\"busuanzi-footer\"\u003e \u003cspan id=\"busuanzi_container_site_pv\"\u003e 本站总访问量\u003cspan id=\"busuanzi_value_site_pv\"\u003e\u003c/span\u003e次 \u003c/span\u003e \u003cspan id=\"busuanzi_container_site_uv\"\u003e 本站访客数\u003cspan id=\"busuanzi_value_site_uv\"\u003e\u003c/span\u003e人次 \u003c/span\u003e \u003c/div\u003e {{- end -}} 3.single.html\n用于显示每篇文章阅读量\n我的papermod路径为themes/PaperMod/layouts/_default/single.html\n添加以下代码，加在代码块内\n{{ if .Site.Params.busuanzi.enable -}} \u003cdiv class=\"meta-item\"\u003e\u0026nbsp·\u0026nbsp \u003cspan id=\"busuanzi_container_page_pv\"\u003e本文阅读量\u003cspan id=\"busuanzi_value_page_pv\"\u003e\u003c/span\u003e次\u003c/span\u003e \u003c/div\u003e {{- end }} 4.config.yml\n回到根目录的config.yml，在params里加上busuanzi:功能\n显示统计即为true\nparams: busuanzi: enable: true 二.搜索功能 分别在中英文的文件夹下创建search.md（hugo new search.md），修改文件头为：\ntitle: \"Search\" date: ... draft: false layout: search config.yml中添加：\nmenu: main: -identifier: Search name: Search url: search weight: ... 三.目录栏放在左侧 1.首先找到目录 layouts/partials/toc.html，把之前的代码换成如下代码\n{{- $headers := findRE \"\u003ch[1-6].*?\u003e(.|\\n])+?\u003c/h[1-6]\u003e\" .Content -}} {{- $has_headers := ge (len $headers) 1 -}} {{- if $has_headers -}} \u003caside id=\"toc-container\" class=\"toc-container wide\"\u003e \u003cdiv class=\"toc\"\u003e \u003cdetails {{if (.Param \"TocOpen\") }} open{{ end }}\u003e \u003csummary accesskey=\"c\" title=\"(Alt + C)\"\u003e \u003cspan class=\"details\"\u003e{{- i18n \"toc\" | default \"Table of Contents\" }}\u003c/span\u003e \u003c/summary\u003e \u003cdiv class=\"inner\"\u003e {{- $largest := 6 -}} {{- range $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{- if lt $headerLevel $largest -}} {{- $largest = $headerLevel -}} {{- end -}} {{- end -}} {{- $firstHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers 0) 1) 0)) -}} {{- $.Scratch.Set \"bareul\" slice -}} \u003cul\u003e {{- range seq (sub $firstHeaderLevel $largest) -}} \u003cul\u003e {{- $.Scratch.Add \"bareul\" (sub (add $largest .) 1) -}} {{- end -}} {{- range $i, $header := $headers -}} {{- $headerLevel := index (findRE \"[1-6]\" . 1) 0 -}} {{- $headerLevel := len (seq $headerLevel) -}} {{/* get id=\"xyz\" */}} {{- $id := index (findRE \"(id=\\\"(.*?)\\\")\" $header 9) 0 }} {{- /* strip id=\"\" to leave xyz, no way to get regex capturing groups in hugo */ -}} {{- $cleanedID := replace (replace $id \"id=\\\"\" \"\") \"\\\"\" \"\" }} {{- $header := replaceRE \"\u003ch[1-6].*?\u003e((.|\\n])+?)\u003c/h[1-6]\u003e\" \"$1\" $header -}} {{- if ne $i 0 -}} {{- $prevHeaderLevel := index (findRE \"[1-6]\" (index $headers (sub $i 1)) 1) 0 -}} {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}} {{- if gt $headerLevel $prevHeaderLevel -}} {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}} \u003cul\u003e {{/* the first should not be recorded */}} {{- if ne $prevHeaderLevel . -}} {{- $.Scratch.Add \"bareul\" . -}} {{- end -}} {{- end -}} {{- else -}} \u003c/li\u003e {{- if lt $headerLevel $prevHeaderLevel -}} {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}} {{- if in ($.Scratch.Get \"bareul\") . -}} \u003c/ul\u003e {{/* manually do pop item */}} {{- $tmp := $.Scratch.Get \"bareul\" -}} {{- $.Scratch.Delete \"bareul\" -}} {{- $.Scratch.Set \"bareul\" slice}} {{- range seq (sub (len $tmp) 1) -}} {{- $.Scratch.Add \"bareul\" (index $tmp (sub . 1)) -}} {{- end -}} {{- else -}} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end -}} {{- end -}} {{- end }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- else }} \u003cli\u003e \u003ca href=\"#{{- $cleanedID -}}\" aria-label=\"{{- $header | plainify -}}\"\u003e{{- $header | safeHTML -}}\u003c/a\u003e {{- end -}} {{- end -}} {{- $firstHeaderLevel := $largest }} {{- $lastHeaderLevel := len (seq (index (findRE \"[1-6]\" (index $headers (sub (len $headers) 1)) 1) 0)) }} \u003c/li\u003e {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}} {{- if in ($.Scratch.Get \"bareul\") (add . $firstHeaderLevel) }} \u003c/ul\u003e {{- else }} \u003c/ul\u003e \u003c/li\u003e {{- end -}} {{- end }} \u003c/ul\u003e \u003c/div\u003e \u003c/details\u003e \u003c/div\u003e \u003c/aside\u003e \u003cscript\u003e let activeElement; let elements; window.addEventListener('DOMContentLoaded', function (event) { checkTocPosition(); elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'); // Make the first header active activeElement = elements[0]; const id = encodeURI(activeElement.getAttribute('id')).toLowerCase(); document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.add('active'); }, false); window.addEventListener('resize', function(event) { checkTocPosition(); }, false); window.addEventListener('scroll', () =\u003e { // Check if there is an object in the top half of the screen or keep the last item active activeElement = Array.from(elements).find((element) =\u003e { if ((getOffsetTop(element) - window.pageYOffset) \u003e 0 \u0026\u0026 (getOffsetTop(element) - window.pageYOffset) \u003c window.innerHeight/2) { return element; } }) || activeElement elements.forEach(element =\u003e { const id = encodeURI(element.getAttribute('id')).toLowerCase(); if (element === activeElement){ document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.add('active'); } else { document.querySelector(`.inner ul li a[href=\"#${id}\"]`).classList.remove('active'); } }) }, false); const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10); const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10); const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10); function checkTocPosition() { const width = document.body.scrollWidth; if (width - main - (toc * 2) - (gap * 4) \u003e 0) { document.getElementById(\"toc-container\").classList.add(\"wide\"); } else { document.getElementById(\"toc-container\").classList.remove(\"wide\"); } } function getOffsetTop(element) { if (!element.getClientRects().length) { return 0; } let rect = element.getBoundingClientRect(); let win = element.ownerDocument.defaultView; return rect.top + win.pageYOffset; } \u003c/script\u003e {{- end }} 2.找到目录 layouts/_default/single.html，调用toc.html，注意：这里默认是有调用的\n{{- if (.Param \"ShowToc\") }} {{- partial \"toc.html\" . }} {{- end }} 3.修改css，找到目录 css/extended/blank.css ，复制如下代码\n:root { --nav-width: 1380px; --article-width: 650px; --toc-width: 300px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .active { font-size: 110%; font-weight: 600; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; /*目录显示高度*/ max-height: 83vh; overflow-y: auto; } .toc .inner::-webkit-scrollbar-thumb { /*滚动条*/ background: var(--border); border: 7px solid var(--theme); border-radius: var(--radius); } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 四.Git部署到Github 第一次部署到Github需要在yurooc目录下执行hugo命令生成public文件\ncd进入public文件之后，执行以下命令\ngit init #初始化仓库 git remote add origin https://github.com/yurooc/yurooc.github.io.git #链接远程仓库 git add . git commit -m \"first commit\" git branch -m master main #因为github远程仓库默认分支修改为main，而git本地分支为master，这里将本地分支master修改为main git push -f origin main\t#-f是全部覆盖，生产环境慎用此命令 在此之后更新文章，使用hugo生成新的静态页面，并使用git push进行同步 cd public git add . git status git commit -m \"add blog post\" git push -f origin main 五.域名解析，自定义域名 在华为云购买一个自己喜欢的域名，完成步骤之后在域名解析中修改记录集 主机记录：yurooc.top\n类型：CNAME\n值：yurooc.github.io\n然后到GitHub中的setting中找到Pages一栏，在Custom domain界面中填写自己的域名www.yurooc.top然后点击Save提交，等待几分钟后勾选Enforce HTTPS ",
  "wordCount" : "2357",
  "inLanguage": "en",
  "datePublished": "2023-11-08T03:01:57+08:00",
  "dateModified": "2023-11-08T03:01:57+08:00",
  "author":[{
    "@type": "Person",
    "name": "Yu"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://yurooc.github.io/blog/hugo%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "YuBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://yurooc.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://yurooc.github.io" accesskey="h" title="YuBlog (Alt + H)">YuBlog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://yurooc.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://yurooc.github.io/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://yurooc.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://yurooc.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/yurooc" title="GitHub">
                    <span>GitHub</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://yurooc.github.io">Home</a>&nbsp;»&nbsp;<a href="https://yurooc.github.io/blog/">Blogs</a></div>
    <h1 class="post-title">
      Hugo安装配置
    </h1>
    <div class="post-description">
      在使用Hugo过程中的一些安装和配置问题
    </div>
    <div class="post-meta"><span title='2023-11-08 03:01:57 +0800 CST'>November 8, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;2357 words&nbsp;·&nbsp;Yu


      <div  class="meta-item">&nbsp·&nbsp
      <span id="busuanzi_container_page_pv">本文阅读量<span id="busuanzi_value_page_pv"></span>次</span>
    </div>
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e4%b8%80hugo%e4%b8%ad%e6%b7%bb%e5%8a%a0%e4%b8%8d%e8%92%9c%e5%ad%90%e8%ae%a1%e6%95%b0" aria-label="一.Hugo中添加不蒜子计数">一.Hugo中添加不蒜子计数</a></li>
                    <li>
                        <a href="#%e4%ba%8c%e6%90%9c%e7%b4%a2%e5%8a%9f%e8%83%bd" aria-label="二.搜索功能">二.搜索功能</a></li>
                    <li>
                        <a href="#%e4%b8%89%e7%9b%ae%e5%bd%95%e6%a0%8f%e6%94%be%e5%9c%a8%e5%b7%a6%e4%be%a7" aria-label="三.目录栏放在左侧">三.目录栏放在左侧</a></li>
                    <li>
                        <a href="#%e5%9b%9bgit%e9%83%a8%e7%bd%b2%e5%88%b0github" aria-label="四.Git部署到Github">四.Git部署到Github</a></li>
                    <li>
                        <a href="#%e4%ba%94%e5%9f%9f%e5%90%8d%e8%a7%a3%e6%9e%90%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9f%9f%e5%90%8d" aria-label="五.域名解析，自定义域名">五.域名解析，自定义域名</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="一hugo中添加不蒜子计数">一.Hugo中添加不蒜子计数<a hidden class="anchor" aria-hidden="true" href="#一hugo中添加不蒜子计数">#</a></h1>
<p><code>Hugo</code>添加不蒜子页面浏览次数与阅读数据统计</p>
<p><strong>什么是不蒜子？</strong></p>
<p><code>Busuanzi</code>是一个用于统计网站访问量的工具。它通常嵌入到网页中，可以追踪页面的浏览次数，方可数量积极其他一些基本的访问数据。这个工具可以帮助网站管理员了解他们的网站受欢迎程度和流量情况。</p>
<p><strong>使用步骤</strong></p>
<p>在<code>head.html</code>，<code>footer.html</code>，<code>single.html</code>，<code>config.yml</code>进行修改</p>
<p><strong>1.head.html</strong></p>
<p>我的<code>papermod</code>的路径为<code>themes/PaperMod/layouts/partials/head.html</code></p>
<p>添加以下代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- busuanzi --&gt;</span>
</span></span><span style="display:flex;"><span>{{- if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">async</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;referrer&#34;</span> <span style="color:#a6e22e">content</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;no-referrer-when-downgrade&#34;</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><p><strong>2.footer.html</strong></p>
<p>用于在站点底部显示总访问量与访客数</p>
<p>我的<code>PaperMod</code>路径为<code>themes/PaperMod/layouts/partials/footer.html</code></p>
<p>添加以下代码，注意添加在<code>&lt;footer&gt;</code>代码块里</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- busuanzi --&gt;</span>
</span></span><span style="display:flex;"><span>{{ if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_site_pv&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    本站总访问量&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_site_pv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;次
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_site_uv&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    本站访客数&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_site_uv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;人次
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{- end -}}
</span></span></code></pre></div><p><strong>3.single.html</strong></p>
<p>用于显示每篇文章阅读量</p>
<p>我的<code>papermod</code>路径为<code>themes/PaperMod/layouts/_default/single.html</code></p>
<p>添加以下代码，加在<code>&lt;header&gt;</code>代码块内</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- busuanzi --&gt;</span>
</span></span><span style="display:flex;"><span>{{ if .Site.Params.busuanzi.enable -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span>  <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;meta-item&#34;</span>&gt;<span style="color:#960050;background-color:#1e0010">&amp;</span>nbsp·<span style="color:#960050;background-color:#1e0010">&amp;</span>nbsp
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_container_page_pv&#34;</span>&gt;本文阅读量&lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;busuanzi_value_page_pv&#34;</span>&gt;&lt;/<span style="color:#f92672">span</span>&gt;次&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><p><strong>4.config.yml</strong></p>
<p>回到根目录的<code>config.yml</code>，在<code>params</code>里加上<code>busuanzi:</code>功能</p>
<p>显示统计即为<code>true</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>params:  
</span></span><span style="display:flex;"><span>    busuanzi:
</span></span><span style="display:flex;"><span>        enable: true
</span></span></code></pre></div><h1 id="二搜索功能">二.搜索功能<a hidden class="anchor" aria-hidden="true" href="#二搜索功能">#</a></h1>
<p>分别在中英文的文件夹下创建<code>search.md</code>（<code>hugo new search.md</code>），修改文件头为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>title: &#34;Search&#34;
</span></span><span style="display:flex;"><span>date: ...
</span></span><span style="display:flex;"><span>draft: false
</span></span><span style="display:flex;"><span>layout: search
</span></span></code></pre></div><p><code>config.yml</code>中添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>menu:
</span></span><span style="display:flex;"><span>	main:
</span></span><span style="display:flex;"><span>		-identifier: Search
</span></span><span style="display:flex;"><span>		name: Search
</span></span><span style="display:flex;"><span>		url: search
</span></span><span style="display:flex;"><span>		weight: ...
</span></span></code></pre></div><h1 id="三目录栏放在左侧">三.目录栏放在左侧<a hidden class="anchor" aria-hidden="true" href="#三目录栏放在左侧">#</a></h1>
<p>1.首先找到目录 <code>layouts/partials/toc.html</code>，把之前的代码换成如下代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{- $headers := findRE &#34;&lt;<span style="color:#f92672">h</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1-6</span><span style="color:#960050;background-color:#1e0010">].*?</span>&gt;(.|\n])+?<span style="color:#960050;background-color:#1e0010">&lt;</span>/h[1-6]&gt;&#34; .Content -}}
</span></span><span style="display:flex;"><span>{{- $has_headers := ge (len $headers) 1 -}}
</span></span><span style="display:flex;"><span>{{- if $has_headers -}}
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">aside</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc-container&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc-container wide&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;toc&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">details</span> <span style="color:#960050;background-color:#1e0010">{{</span><span style="color:#a6e22e">if</span> <span style="color:#960050;background-color:#1e0010">(.</span><span style="color:#a6e22e">Param</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">TocOpen</span><span style="color:#960050;background-color:#1e0010">&#34;)</span> <span style="color:#960050;background-color:#1e0010">}}</span> <span style="color:#a6e22e">open</span><span style="color:#960050;background-color:#1e0010">{{</span> <span style="color:#a6e22e">end</span> <span style="color:#960050;background-color:#1e0010">}}</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">summary</span> <span style="color:#a6e22e">accesskey</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;c&#34;</span> <span style="color:#a6e22e">title</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;(Alt + C)&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;details&#34;</span>&gt;{{- i18n &#34;toc&#34; | default &#34;Table of Contents&#34; }}&lt;/<span style="color:#f92672">span</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">summary</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inner&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                {{- $largest := 6 -}}
</span></span><span style="display:flex;"><span>                {{- range $headers -}}
</span></span><span style="display:flex;"><span>                {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span style="display:flex;"><span>                {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span style="display:flex;"><span>                {{- if lt $headerLevel $largest -}}
</span></span><span style="display:flex;"><span>                {{- $largest = $headerLevel -}}
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                {{- $.Scratch.Set &#34;bareul&#34; slice -}}
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- range seq (sub $firstHeaderLevel $largest) -}}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Add &#34;bareul&#34; (sub (add $largest .) 1) -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- range $i, $header := $headers -}}
</span></span><span style="display:flex;"><span>                        {{- $headerLevel := index (findRE &#34;[1-6]&#34; . 1) 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $headerLevel := len (seq $headerLevel) -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{/* get id=&#34;xyz&#34; */}}
</span></span><span style="display:flex;"><span>                        {{- $id := index (findRE &#34;(id=\&#34;(.*?)\&#34;)&#34; $header 9) 0 }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{- /* strip id=&#34;&#34; to leave xyz, no way to get regex capturing groups in hugo */ -}}
</span></span><span style="display:flex;"><span>                        {{- $cleanedID := replace (replace $id &#34;id=\&#34;&#34; &#34;&#34;) &#34;\&#34;&#34; &#34;&#34; }}
</span></span><span style="display:flex;"><span>                        {{- $header := replaceRE &#34;&lt;<span style="color:#f92672">h</span><span style="color:#960050;background-color:#1e0010">[</span><span style="color:#a6e22e">1-6</span><span style="color:#960050;background-color:#1e0010">].*?</span>&gt;((.|\n])+?)<span style="color:#960050;background-color:#1e0010">&lt;</span>/h[1-6]&gt;&#34; &#34;$1&#34; $header -}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        {{- if ne $i 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $prevHeaderLevel := index (findRE &#34;[1-6]&#34; (index $headers (sub $i 1)) 1) 0 -}}
</span></span><span style="display:flex;"><span>                        {{- $prevHeaderLevel := len (seq $prevHeaderLevel) -}}
</span></span><span style="display:flex;"><span>                        {{- if gt $headerLevel $prevHeaderLevel -}}
</span></span><span style="display:flex;"><span>                        {{- range seq $prevHeaderLevel (sub $headerLevel 1) -}}
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                            {{/* the first should not be recorded */}}
</span></span><span style="display:flex;"><span>                            {{- if ne $prevHeaderLevel . -}}
</span></span><span style="display:flex;"><span>                            {{- $.Scratch.Add &#34;bareul&#34; . -}}
</span></span><span style="display:flex;"><span>                            {{- end -}}
</span></span><span style="display:flex;"><span>                            {{- end -}}
</span></span><span style="display:flex;"><span>                            {{- else -}}
</span></span><span style="display:flex;"><span>                            &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                            {{- if lt $headerLevel $prevHeaderLevel -}}
</span></span><span style="display:flex;"><span>                            {{- range seq (sub $prevHeaderLevel 1) -1 $headerLevel -}}
</span></span><span style="display:flex;"><span>                            {{- if in ($.Scratch.Get &#34;bareul&#34;) . -}}
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                        {{/* manually do pop item */}}
</span></span><span style="display:flex;"><span>                        {{- $tmp := $.Scratch.Get &#34;bareul&#34; -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Delete &#34;bareul&#34; -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Set &#34;bareul&#34; slice}}
</span></span><span style="display:flex;"><span>                        {{- range seq (sub (len $tmp) 1) -}}
</span></span><span style="display:flex;"><span>                        {{- $.Scratch.Add &#34;bareul&#34; (index $tmp (sub . 1)) -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- else -}}
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end -}}
</span></span><span style="display:flex;"><span>                    {{- end }}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{{- $cleanedID -}}&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{- $header | plainify -}}&#34;</span>&gt;{{- $header | safeHTML -}}&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- else }}
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{{- $cleanedID -}}&#34;</span> <span style="color:#a6e22e">aria-label</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{- $header | plainify -}}&#34;</span>&gt;{{- $header | safeHTML -}}&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        {{- end -}}
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">&lt;!-- {{- $firstHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers 0) 1) 0)) -}} --&gt;</span>
</span></span><span style="display:flex;"><span>                        {{- $firstHeaderLevel := $largest }}
</span></span><span style="display:flex;"><span>                        {{- $lastHeaderLevel := len (seq (index (findRE &#34;[1-6]&#34; (index $headers (sub (len $headers) 1)) 1) 0)) }}
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                    {{- range seq (sub $lastHeaderLevel $firstHeaderLevel) -}}
</span></span><span style="display:flex;"><span>                    {{- if in ($.Scratch.Get &#34;bareul&#34;) (add . $firstHeaderLevel) }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                {{- else }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">li</span>&gt;
</span></span><span style="display:flex;"><span>                {{- end -}}
</span></span><span style="display:flex;"><span>                {{- end }}
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">details</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">aside</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">activeElement</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">elements</span>;
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;DOMContentLoaded&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">checkTocPosition</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">elements</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelectorAll</span>(<span style="color:#e6db74">&#39;h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]&#39;</span>);
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// Make the first header active
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#a6e22e">activeElement</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">elements</span>[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> encodeURI(<span style="color:#a6e22e">activeElement</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;id&#39;</span>)).<span style="color:#a6e22e">toLowerCase</span>();
</span></span><span style="display:flex;"><span>         document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">`.inner ul li a[href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;]`</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>     }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;resize&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">checkTocPosition</span>();
</span></span><span style="display:flex;"><span>    }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;scroll&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Check if there is an object in the top half of the screen or keep the last item active
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">activeElement</span> <span style="color:#f92672">=</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#a6e22e">elements</span>).<span style="color:#a6e22e">find</span>((<span style="color:#a6e22e">element</span>) =&gt; {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> ((<span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) <span style="color:#f92672">-</span> window.<span style="color:#a6e22e">pageYOffset</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> 
</span></span><span style="display:flex;"><span>                (<span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) <span style="color:#f92672">-</span> window.<span style="color:#a6e22e">pageYOffset</span>) <span style="color:#f92672">&lt;</span> window.<span style="color:#a6e22e">innerHeight</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">element</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }) <span style="color:#f92672">||</span> <span style="color:#a6e22e">activeElement</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">elements</span>.<span style="color:#a6e22e">forEach</span>(<span style="color:#a6e22e">element</span> =&gt; {
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> encodeURI(<span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;id&#39;</span>)).<span style="color:#a6e22e">toLowerCase</span>();
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">element</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">activeElement</span>){
</span></span><span style="display:flex;"><span>                 document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">`.inner ul li a[href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;]`</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>             } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                 document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">`.inner ul li a[href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;]`</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">remove</span>(<span style="color:#e6db74">&#39;active&#39;</span>);
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>         })
</span></span><span style="display:flex;"><span>     }, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">main</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--article-width&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">toc</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--toc-width&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">gap</span> <span style="color:#f92672">=</span> parseInt(<span style="color:#a6e22e">getComputedStyle</span>(document.<span style="color:#a6e22e">body</span>).<span style="color:#a6e22e">getPropertyValue</span>(<span style="color:#e6db74">&#39;--gap&#39;</span>), <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">checkTocPosition</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollWidth</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">main</span> <span style="color:#f92672">-</span> (<span style="color:#a6e22e">toc</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">-</span> (<span style="color:#a6e22e">gap</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;toc-container&#34;</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;wide&#34;</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;toc-container&#34;</span>).<span style="color:#a6e22e">classList</span>.<span style="color:#a6e22e">remove</span>(<span style="color:#e6db74">&#34;wide&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getOffsetTop</span>(<span style="color:#a6e22e">element</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getClientRects</span>().<span style="color:#a6e22e">length</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rect</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">getBoundingClientRect</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">win</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">element</span>.<span style="color:#a6e22e">ownerDocument</span>.<span style="color:#a6e22e">defaultView</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">rect</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">win</span>.<span style="color:#a6e22e">pageYOffset</span>;   
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><p>2.找到目录 <code>layouts/_default/single.html</code>，调用<code>toc.html</code>，注意：这里默认是有调用的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>  {{- if (.Param &#34;ShowToc&#34;) }}
</span></span><span style="display:flex;"><span>  {{- partial &#34;toc.html&#34; . }}
</span></span><span style="display:flex;"><span>  {{- end }}
</span></span></code></pre></div><p>3.修改css，找到目录<code> css/extended/blank.css</code> ，复制如下代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    --nav-width: <span style="color:#ae81ff">1380</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    --article-width: <span style="color:#ae81ff">650</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    --toc-width: <span style="color:#ae81ff">300</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>entry);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>radius);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0.4</span><span style="color:#66d9ef">em</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc-container</span>.<span style="color:#a6e22e">wide</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">absolute</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-right</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">left</span>: calc((<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>toc<span style="color:#f92672">-</span>width) <span style="color:#f92672">+</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap)) <span style="color:#f92672">*</span> <span style="color:#ae81ff">-1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: calc(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap) <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>toc<span style="color:#f92672">-</span>width);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">wide</span> .<span style="color:#a6e22e">toc</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">sticky</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">top</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#66d9ef">unset</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">40</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">2</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">details</span> <span style="color:#f92672">summary</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">cursor</span>: <span style="color:#66d9ef">zoom-in</span>;
</span></span><span style="display:flex;"><span>    margin-inline-start: <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">12</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">details</span><span style="color:#f92672">[</span><span style="color:#f92672">open</span><span style="color:#f92672">]</span> <span style="color:#f92672">summary</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">500</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc-container</span>.<span style="color:#a6e22e">wide</span> .<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">active</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">110</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-weight</span>: <span style="color:#ae81ff">600</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">ul</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">circle</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">15</span><span style="color:#66d9ef">px</span> <span style="color:#ae81ff">20</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">16</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/*目录显示高度*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">max-height</span>: <span style="color:#ae81ff">83</span><span style="color:#66d9ef">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">overflow-y</span>: <span style="color:#66d9ef">auto</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> .<span style="color:#a6e22e">inner</span>::<span style="color:#a6e22e">-webkit-scrollbar-thumb</span> {  <span style="color:#75715e">/*滚动条*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>border);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">7</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>theme);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>radius);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> <span style="color:#f92672">ul</span> {
</span></span><span style="display:flex;"><span>    margin-inline-start: calc(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>gap) <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.5</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style-type</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">list-style</span>: <span style="color:#66d9ef">none</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">0.95</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding-bottom</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">toc</span> <span style="color:#f92672">li</span> <span style="color:#f92672">a</span>:<span style="color:#a6e22e">hover</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>secondary);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="四git部署到github">四.Git部署到Github<a hidden class="anchor" aria-hidden="true" href="#四git部署到github">#</a></h1>
<ol>
<li>
<p>第一次部署到Github需要在<code>yurooc</code>目录下执行<code>hugo</code>命令生成<code>public</code>文件</p>
</li>
<li>
<p>cd进入<code>public</code>文件之后，执行以下命令</p>
</li>
</ol>
<pre tabindex="0"><code>git init    #初始化仓库
git remote add origin https://github.com/yurooc/yurooc.github.io.git    #链接远程仓库
git add .
git commit -m &#34;first commit&#34;
git branch -m master main  #因为github远程仓库默认分支修改为main，而git本地分支为master，这里将本地分支master修改为main
git push -f origin main		#-f是全部覆盖，生产环境慎用此命令
</code></pre><ol start="3">
<li>在此之后更新文章，使用hugo生成新的静态页面，并使用git push进行同步</li>
</ol>
<pre tabindex="0"><code>cd public
git add .
git status
git commit -m &#34;add blog post&#34;
git push -f origin main
</code></pre><h1 id="五域名解析自定义域名">五.域名解析，自定义域名<a hidden class="anchor" aria-hidden="true" href="#五域名解析自定义域名">#</a></h1>
<ol>
<li>在华为云购买一个自己喜欢的域名，完成步骤之后在域名解析中修改记录集</li>
</ol>
<p><code>主机记录</code>：yurooc.top</p>
<p><code>类型</code>：CNAME</p>
<p><code>值</code>：yurooc.github.io</p>
<ol start="2">
<li>然后到GitHub中的<code>setting</code>中找到<code>Pages</code>一栏，在<code>Custom domain</code>界面中填写自己的域名<code>www.yurooc.top</code>然后点击<code>Save</code>提交，等待几分钟后勾选<code>Enforce HTTPS</code></li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://yurooc.github.io/tags/hugo/">Hugo</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://yurooc.github.io">YuBlog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    
    <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv">
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
    </span>
    <span id="busuanzi_container_site_uv">
        本站访客数<span id="busuanzi_value_site_uv"></span>人次
    </span>
    </div></footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
